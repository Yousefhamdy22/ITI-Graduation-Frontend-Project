<div class="max-w-7xl mx-auto px-6 py-12" dir="rtl">
  <h1 class="text-4xl font-bold mb-10">ุงููุญุงุถุฑุงุช ุงูุชุนููููุฉ</h1>

  <div class="mb-8 space-y-4">
    <input type="text" [(ngModel)]="query.search" (input)="onSearch()" placeholder="ุงุจุญุซ ุนู ูุญุงุถุฑุฉ..."
      class="w-full px-6 py-4 rounded-xl border text-lg">
  </div>

  <div *ngIf="loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 py-8">
    <div *ngFor="let _ of [1,2,3,4,5,6]" class="bg-gray-200 rounded-2xl h-64 animate-pulse"></div>
  </div>

  <div *ngIf="!loading && filteredLessons.length > 0" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    <div *ngFor="let lecture of filteredLessons" class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition">

      <!-- Lecture Header -->
      <div class="h-40 bg-gradient-to-r from-blue-500 to-teal-600 flex items-center justify-center text-white relative">
        <div class="text-center">
          <p class="text-4xl mb-2">
            {{ lecture.isRecordedAvailable ? '๐ฅ' : '๐น' }}
          </p>
          <p class="text-sm">{{ formatDuration(lecture.duration) }}</p>
        </div>

        <!-- Status Badge -->
        <div class="absolute top-3 right-3">
          <span *ngIf="lecture.isCompleted" class="bg-green-500 text-white text-xs px-3 py-1 rounded-full">
            โ ููุชููุฉ
          </span>
          <span *ngIf="!lecture.isCompleted" class="bg-yellow-500 text-white text-xs px-3 py-1 rounded-full">
            ูุงุฏูุฉ
          </span>
        </div>
      </div>

      <!-- Lecture Content -->
      <div class="p-5">
        <h3 class="font-bold text-lg mb-2">{{ lecture.title }}</h3>

        <!-- Lecture Info -->
        <div class="space-y-2 mb-4">
          <div class="flex items-center text-sm text-gray-600">
            <span class="ml-2">๐</span>
            <span>{{ lecture.scheduledAt | date:'dd/MM/yyyy - hh:mm a' }}</span>
          </div>

          <div class="flex items-center text-sm text-gray-600">
            <span class="ml-2">โฑ๏ธ</span>
            <span>{{ formatDuration(lecture.duration) }}</span>
          </div>

          <!-- Zoom Meeting Info -->
          <div *ngIf="lecture.zoomMeeting" class="flex items-center text-sm text-blue-600">
            <span class="ml-2">๐ป</span>
            <span>Zoom Meeting ูุชุงุญ</span>
          </div>

          <!-- Recording Info -->
          <div *ngIf="lecture.isRecordedAvailable && lecture.zoomRecording"
            class="flex items-center text-sm text-green-600">
            <span class="ml-2">๐ฌ</span>
            <span>ุงูุชุณุฌูู ูุชุงุญ</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="space-y-2">
          <!-- Join Zoom Meeting -->
          <a *ngIf="lecture.zoomMeeting && !lecture.isCompleted" [href]="lecture.zoomMeeting.joinUrl" target="_blank"
            class="block w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition text-center">
            ุงูุถู ูููุญุงุถุฑุฉ ุงููุจุงุดุฑุฉ
          </a>

          <!-- Watch Recording -->
          <a *ngIf="lecture.isRecordedAvailable && lecture.zoomRecording" [href]="lecture.zoomRecording.recordingUrl"
            target="_blank"
            class="block w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition text-center">
            ุดุงูุฏ ุงูุชุณุฌูู
          </a>

          <!-- Disabled Button -->
          <button *ngIf="!lecture.zoomMeeting && !lecture.isRecordedAvailable" disabled
            class="w-full bg-gray-300 text-gray-500 py-2 rounded-lg cursor-not-allowed">
            ุบูุฑ ูุชุงุญ ุญุงููุงู
          </button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && filteredLessons.length === 0" class="text-center py-24 text-xl text-gray-500">
    ูุง ุชูุฌุฏ ูุญุงุถุฑุงุช
  </div>
</div>